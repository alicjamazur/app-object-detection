{"ast":null,"code":"import { __assign, __awaiter, __generator } from \"tslib\";\nimport { HttpRequest as __HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { LazyJsonString as __LazyJsonString } from \"@aws-sdk/smithy-client\";\nexport var serializeAws_restJson1PutEventsCommand = function (input, context) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var headers, resolvedPath, body, _a, hostname, _b, protocol, port;\n\n    return __generator(this, function (_c) {\n      switch (_c.label) {\n        case 0:\n          headers = {\n            \"Content-Type\": \"application/json\"\n          };\n          resolvedPath = \"/events\";\n          body = JSON.stringify(__assign(__assign(__assign(__assign({}, input.eventList !== undefined && {\n            eventList: serializeAws_restJson1EventList(input.eventList, context)\n          }), input.sessionId !== undefined && {\n            sessionId: input.sessionId\n          }), input.trackingId !== undefined && {\n            trackingId: input.trackingId\n          }), input.userId !== undefined && {\n            userId: input.userId\n          }));\n          return [4\n          /*yield*/\n          , context.endpoint()];\n\n        case 1:\n          _a = _c.sent(), hostname = _a.hostname, _b = _a.protocol, protocol = _b === void 0 ? \"https\" : _b, port = _a.port;\n          return [2\n          /*return*/\n          , new __HttpRequest({\n            protocol: protocol,\n            hostname: hostname,\n            port: port,\n            method: \"POST\",\n            headers: headers,\n            path: resolvedPath,\n            body: body\n          })];\n      }\n    });\n  });\n};\nexport var deserializeAws_restJson1PutEventsCommand = function (output, context) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var contents;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          if (output.statusCode !== 200 && output.statusCode >= 400) {\n            return [2\n            /*return*/\n            , deserializeAws_restJson1PutEventsCommandError(output, context)];\n          }\n\n          contents = {\n            $metadata: deserializeMetadata(output)\n          };\n          return [4\n          /*yield*/\n          , collectBody(output.body, context)];\n\n        case 1:\n          _a.sent();\n\n          return [2\n          /*return*/\n          , Promise.resolve(contents)];\n      }\n    });\n  });\n};\n\nvar deserializeAws_restJson1PutEventsCommandError = function (output, context) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var parsedOutput, _a, _b, response, errorCode, _c, _d, parsedBody, message;\n\n    return __generator(this, function (_e) {\n      switch (_e.label) {\n        case 0:\n          _a = [__assign({}, output)];\n          _b = {};\n          return [4\n          /*yield*/\n          , parseBody(output.body, context)];\n\n        case 1:\n          parsedOutput = __assign.apply(void 0, _a.concat([(_b.body = _e.sent(), _b)]));\n          errorCode = \"UnknownError\";\n          errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n          _c = errorCode;\n\n          switch (_c) {\n            case \"InvalidInputException\":\n              return [3\n              /*break*/\n              , 2];\n\n            case \"com.amazonaws.personalizeevents#InvalidInputException\":\n              return [3\n              /*break*/\n              , 2];\n          }\n\n          return [3\n          /*break*/\n          , 4];\n\n        case 2:\n          _d = [{}];\n          return [4\n          /*yield*/\n          , deserializeAws_restJson1InvalidInputExceptionResponse(parsedOutput, context)];\n\n        case 3:\n          response = __assign.apply(void 0, [__assign.apply(void 0, _d.concat([_e.sent()])), {\n            name: errorCode,\n            $metadata: deserializeMetadata(output)\n          }]);\n          return [3\n          /*break*/\n          , 5];\n\n        case 4:\n          parsedBody = parsedOutput.body;\n          errorCode = parsedBody.code || parsedBody.Code || errorCode;\n          response = __assign(__assign({}, parsedBody), {\n            name: \"\" + errorCode,\n            message: parsedBody.message || parsedBody.Message || errorCode,\n            $fault: \"client\",\n            $metadata: deserializeMetadata(output)\n          });\n          _e.label = 5;\n\n        case 5:\n          message = response.message || response.Message || errorCode;\n          response.message = message;\n          delete response.Message;\n          return [2\n          /*return*/\n          , Promise.reject(Object.assign(new Error(message), response))];\n      }\n    });\n  });\n};\n\nvar deserializeAws_restJson1InvalidInputExceptionResponse = function (parsedOutput, context) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n      contents = {\n        name: \"InvalidInputException\",\n        $fault: \"client\",\n        $metadata: deserializeMetadata(parsedOutput),\n        message: undefined\n      };\n      data = parsedOutput.body;\n\n      if (data.message !== undefined && data.message !== null) {\n        contents.message = data.message;\n      }\n\n      return [2\n      /*return*/\n      , contents];\n    });\n  });\n};\n\nvar serializeAws_restJson1Event = function (input, context) {\n  return __assign(__assign(__assign(__assign({}, input.eventId !== undefined && {\n    eventId: input.eventId\n  }), input.eventType !== undefined && {\n    eventType: input.eventType\n  }), input.properties !== undefined && {\n    properties: __LazyJsonString.fromObject(input.properties)\n  }), input.sentAt !== undefined && {\n    sentAt: Math.round(input.sentAt.getTime() / 1000)\n  });\n};\n\nvar serializeAws_restJson1EventList = function (input, context) {\n  return input.map(function (entry) {\n    return serializeAws_restJson1Event(entry, context);\n  });\n};\n\nvar deserializeMetadata = function (output) {\n  return {\n    httpStatusCode: output.statusCode,\n    httpHeaders: output.headers,\n    requestId: output.headers[\"x-amzn-requestid\"]\n  };\n}; // Collect low-level response body stream to Uint8Array.\n\n\nvar collectBody = function (streamBody, context) {\n  if (streamBody === void 0) {\n    streamBody = new Uint8Array();\n  }\n\n  if (streamBody instanceof Uint8Array) {\n    return Promise.resolve(streamBody);\n  }\n\n  return context.streamCollector(streamBody) || Promise.resolve(new Uint8Array());\n}; // Encode Uint8Array data into string with utf-8.\n\n\nvar collectBodyString = function (streamBody, context) {\n  return collectBody(streamBody, context).then(function (body) {\n    return context.utf8Encoder(body);\n  });\n};\n\nvar isSerializableHeaderValue = function (value) {\n  return value !== undefined && value !== \"\" && (!Object.getOwnPropertyNames(value).includes(\"length\") || value.length != 0) && (!Object.getOwnPropertyNames(value).includes(\"size\") || value.size != 0);\n};\n\nvar parseBody = function (streamBody, context) {\n  return collectBodyString(streamBody, context).then(function (encoded) {\n    if (encoded.length) {\n      return JSON.parse(encoded);\n    }\n\n    return {};\n  });\n};\n/**\n * Load an error code for the aws.rest-json-1.1 protocol.\n */\n\n\nvar loadRestJsonErrorCode = function (output, data) {\n  var findKey = function (object, key) {\n    return Object.keys(object).find(function (k) {\n      return k.toLowerCase() === key.toLowerCase();\n    });\n  };\n\n  var sanitizeErrorCode = function (rawValue) {\n    var cleanValue = rawValue;\n\n    if (cleanValue.indexOf(\":\") >= 0) {\n      cleanValue = cleanValue.split(\":\")[0];\n    }\n\n    if (cleanValue.indexOf(\"#\") >= 0) {\n      cleanValue = cleanValue.split(\"#\")[1];\n    }\n\n    return cleanValue;\n  };\n\n  var headerKey = findKey(output.headers, \"x-amzn-errortype\");\n\n  if (headerKey !== undefined) {\n    return sanitizeErrorCode(output.headers[headerKey]);\n  }\n\n  if (data.code !== undefined) {\n    return sanitizeErrorCode(data.code);\n  }\n\n  if (data[\"__type\"] !== undefined) {\n    return sanitizeErrorCode(data[\"__type\"]);\n  }\n\n  return \"\";\n};","map":{"version":3,"sources":["../../../protocols/Aws_restJson1.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __awaiter, __generator } from \"tslib\";\nimport { HttpRequest as __HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { LazyJsonString as __LazyJsonString } from \"@aws-sdk/smithy-client\";\nexport var serializeAws_restJson1PutEventsCommand = function (input, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var headers, resolvedPath, body, _a, hostname, _b, protocol, port;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                headers = {\n                    \"Content-Type\": \"application/json\",\n                };\n                resolvedPath = \"/events\";\n                body = JSON.stringify(__assign(__assign(__assign(__assign({}, (input.eventList !== undefined && { eventList: serializeAws_restJson1EventList(input.eventList, context) })), (input.sessionId !== undefined && { sessionId: input.sessionId })), (input.trackingId !== undefined && { trackingId: input.trackingId })), (input.userId !== undefined && { userId: input.userId })));\n                return [4 /*yield*/, context.endpoint()];\n            case 1:\n                _a = _c.sent(), hostname = _a.hostname, _b = _a.protocol, protocol = _b === void 0 ? \"https\" : _b, port = _a.port;\n                return [2 /*return*/, new __HttpRequest({\n                        protocol: protocol,\n                        hostname: hostname,\n                        port: port,\n                        method: \"POST\",\n                        headers: headers,\n                        path: resolvedPath,\n                        body: body,\n                    })];\n        }\n    });\n}); };\nexport var deserializeAws_restJson1PutEventsCommand = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (output.statusCode !== 200 && output.statusCode >= 400) {\n                    return [2 /*return*/, deserializeAws_restJson1PutEventsCommandError(output, context)];\n                }\n                contents = {\n                    $metadata: deserializeMetadata(output),\n                };\n                return [4 /*yield*/, collectBody(output.body, context)];\n            case 1:\n                _a.sent();\n                return [2 /*return*/, Promise.resolve(contents)];\n        }\n    });\n}); };\nvar deserializeAws_restJson1PutEventsCommandError = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var parsedOutput, _a, _b, response, errorCode, _c, _d, parsedBody, message;\n    return __generator(this, function (_e) {\n        switch (_e.label) {\n            case 0:\n                _a = [__assign({}, output)];\n                _b = {};\n                return [4 /*yield*/, parseBody(output.body, context)];\n            case 1:\n                parsedOutput = __assign.apply(void 0, _a.concat([(_b.body = _e.sent(), _b)]));\n                errorCode = \"UnknownError\";\n                errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n                _c = errorCode;\n                switch (_c) {\n                    case \"InvalidInputException\": return [3 /*break*/, 2];\n                    case \"com.amazonaws.personalizeevents#InvalidInputException\": return [3 /*break*/, 2];\n                }\n                return [3 /*break*/, 4];\n            case 2:\n                _d = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1InvalidInputExceptionResponse(parsedOutput, context)];\n            case 3:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _d.concat([(_e.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 5];\n            case 4:\n                parsedBody = parsedOutput.body;\n                errorCode = parsedBody.code || parsedBody.Code || errorCode;\n                response = __assign(__assign({}, parsedBody), { name: \"\" + errorCode, message: parsedBody.message || parsedBody.Message || errorCode, $fault: \"client\", $metadata: deserializeMetadata(output) });\n                _e.label = 5;\n            case 5:\n                message = response.message || response.Message || errorCode;\n                response.message = message;\n                delete response.Message;\n                return [2 /*return*/, Promise.reject(Object.assign(new Error(message), response))];\n        }\n    });\n}); };\nvar deserializeAws_restJson1InvalidInputExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"InvalidInputException\",\n            $fault: \"client\",\n            $metadata: deserializeMetadata(parsedOutput),\n            message: undefined,\n        };\n        data = parsedOutput.body;\n        if (data.message !== undefined && data.message !== null) {\n            contents.message = data.message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar serializeAws_restJson1Event = function (input, context) {\n    return __assign(__assign(__assign(__assign({}, (input.eventId !== undefined && { eventId: input.eventId })), (input.eventType !== undefined && { eventType: input.eventType })), (input.properties !== undefined && { properties: __LazyJsonString.fromObject(input.properties) })), (input.sentAt !== undefined && { sentAt: Math.round(input.sentAt.getTime() / 1000) }));\n};\nvar serializeAws_restJson1EventList = function (input, context) {\n    return input.map(function (entry) { return serializeAws_restJson1Event(entry, context); });\n};\nvar deserializeMetadata = function (output) { return ({\n    httpStatusCode: output.statusCode,\n    httpHeaders: output.headers,\n    requestId: output.headers[\"x-amzn-requestid\"],\n}); };\n// Collect low-level response body stream to Uint8Array.\nvar collectBody = function (streamBody, context) {\n    if (streamBody === void 0) { streamBody = new Uint8Array(); }\n    if (streamBody instanceof Uint8Array) {\n        return Promise.resolve(streamBody);\n    }\n    return context.streamCollector(streamBody) || Promise.resolve(new Uint8Array());\n};\n// Encode Uint8Array data into string with utf-8.\nvar collectBodyString = function (streamBody, context) {\n    return collectBody(streamBody, context).then(function (body) { return context.utf8Encoder(body); });\n};\nvar isSerializableHeaderValue = function (value) {\n    return value !== undefined &&\n        value !== \"\" &&\n        (!Object.getOwnPropertyNames(value).includes(\"length\") || value.length != 0) &&\n        (!Object.getOwnPropertyNames(value).includes(\"size\") || value.size != 0);\n};\nvar parseBody = function (streamBody, context) {\n    return collectBodyString(streamBody, context).then(function (encoded) {\n        if (encoded.length) {\n            return JSON.parse(encoded);\n        }\n        return {};\n    });\n};\n/**\n * Load an error code for the aws.rest-json-1.1 protocol.\n */\nvar loadRestJsonErrorCode = function (output, data) {\n    var findKey = function (object, key) { return Object.keys(object).find(function (k) { return k.toLowerCase() === key.toLowerCase(); }); };\n    var sanitizeErrorCode = function (rawValue) {\n        var cleanValue = rawValue;\n        if (cleanValue.indexOf(\":\") >= 0) {\n            cleanValue = cleanValue.split(\":\")[0];\n        }\n        if (cleanValue.indexOf(\"#\") >= 0) {\n            cleanValue = cleanValue.split(\"#\")[1];\n        }\n        return cleanValue;\n    };\n    var headerKey = findKey(output.headers, \"x-amzn-errortype\");\n    if (headerKey !== undefined) {\n        return sanitizeErrorCode(output.headers[headerKey]);\n    }\n    if (data.code !== undefined) {\n        return sanitizeErrorCode(data.code);\n    }\n    if (data[\"__type\"] !== undefined) {\n        return sanitizeErrorCode(data[\"__type\"]);\n    }\n    return \"\";\n};\n//# sourceMappingURL=Aws_restJson1.js.map"]},"metadata":{},"sourceType":"module"}