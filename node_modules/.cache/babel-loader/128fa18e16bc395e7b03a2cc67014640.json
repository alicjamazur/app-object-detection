{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alicjamazur/Desktop/work-in-progress/app-yolov2-client /node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alicjamazur/Desktop/work-in-progress/app-yolov2-client /node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/alicjamazur/Desktop/work-in-progress/app-yolov2-client /node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from\"react\";import{useHistory}from\"react-router-dom\";import{FormGroup,FormControl,ControlLabel}from\"react-bootstrap\";import LoaderButton from\"../components/LoaderButton\";import config from\"../config\";import\"./NewInference.css\";import{API}from\"aws-amplify\";import{onError}from\"../libs/errorLib\";import{Link}from\"react-router-dom\";export default function NewInference(){var file=useRef(null);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];var history=useHistory();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];function handleFileChange(event){file.current=event.target.files[0];}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}/* headers: {\n    \"Access-Control-Allow-Origin\": \"*\",\n    \"Access-Control-Allow-Credentials\": \"True\",\n    'Content-Type': 'image/png'\n  }, */function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var image,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setIsLoading(true);image=file.current;_context.prev=3;_context.next=6;return inference(image);case 6:response=_context.sent;setResult(response.name);setIsLoading(false);/* history.push(\"/result\"); */_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](3);onError(_context.t0);setIsLoading(false);case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,11]]);}));return _handleSubmit.apply(this,arguments);}function inference(image){return API.post(\"inference\",\"\",{body:image});}return/*#__PURE__*/React.createElement(\"div\",{className:\"NewInference\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(FormGroup,{controlId:\"imageFile\"},/*#__PURE__*/React.createElement(ControlLabel,null,result),/*#__PURE__*/React.createElement(FormControl,{onChange:handleFileChange,type:\"file\"})),/*#__PURE__*/React.createElement(LoaderButton,{block:true,type:\"submit\",bsSize:\"large\",bsStyle:\"primary\",isLoading:isLoading},\"Detect\")));}","map":{"version":3,"sources":["/Users/alicjamazur/Desktop/work-in-progress/app-yolov2-client /src/containers/NewInference.js"],"names":["React","useRef","useState","useHistory","FormGroup","FormControl","ControlLabel","LoaderButton","config","API","onError","Link","NewInference","file","result","setResult","history","isLoading","setIsLoading","handleFileChange","event","current","target","files","handleSubmit","preventDefault","image","inference","response","name","post","body"],"mappings":"4hBAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,QAAxB,KAAwC,OAAxC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,SAAT,CAAoBC,WAApB,CAAiCC,YAAjC,KAAqD,iBAArD,CACA,MAAOC,CAAAA,YAAP,KAAyB,4BAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,MAAO,oBAAP,CACA,OAASC,GAAT,KAAoB,aAApB,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,cAAe,SAASC,CAAAA,YAAT,EAAwB,CACrC,GAAMC,CAAAA,IAAI,CAAGZ,MAAM,CAAC,IAAD,CAAnB,CADqC,cAETC,QAAQ,CAAC,IAAD,CAFC,wCAE9BY,MAF8B,eAEtBC,SAFsB,eAGrC,GAAMC,CAAAA,OAAO,CAAGb,UAAU,EAA1B,CAHqC,eAIHD,QAAQ,CAAC,KAAD,CAJL,yCAI9Be,SAJ8B,eAInBC,YAJmB,eAMrC,QAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAAiC,CAC/BP,IAAI,CAACQ,OAAL,CAAeD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAf,CACD,CARoC,QAUtBC,CAAAA,YAVsB,iDA4BrC;;;;OA5BqC,+FAUrC,iBAA4BJ,KAA5B,qIACEA,KAAK,CAACK,cAAN,GAEAP,YAAY,CAAC,IAAD,CAAZ,CACMQ,KAJR,CAIgBb,IAAI,CAACQ,OAJrB,uCAO2BM,CAAAA,SAAS,CAACD,KAAD,CAPpC,QAOUE,QAPV,eAQIb,SAAS,CAACa,QAAQ,CAACC,IAAV,CAAT,CACAX,YAAY,CAAC,KAAD,CAAZ,CACA,8BAVJ,iFAaMR,OAAO,aAAP,CACAQ,YAAY,CAAC,KAAD,CAAZ,CAdN,qEAVqC,+CAkCrC,QAASS,CAAAA,SAAT,CAAmBD,KAAnB,CAA0B,CACxB,MAAOjB,CAAAA,GAAG,CAACqB,IAAJ,CAAS,WAAT,IAA0B,CAC7BC,IAAI,CAAEL,KADuB,CAA1B,CAAP,CAGD,CAED,mBACE,2BAAK,SAAS,CAAC,cAAf,eACE,4BAAM,QAAQ,CAAEF,YAAhB,eACE,oBAAC,SAAD,EAAW,SAAS,CAAC,WAArB,eACE,oBAAC,YAAD,MAAeV,MAAf,CADF,cAEE,oBAAC,WAAD,EAAa,QAAQ,CAAEK,gBAAvB,CAAyC,IAAI,CAAC,MAA9C,EAFF,CADF,cAKE,oBAAC,YAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,QAFP,CAGE,MAAM,CAAC,OAHT,CAIE,OAAO,CAAC,SAJV,CAKE,SAAS,CAAEF,SALb,WALF,CADF,CADF,CAoBC","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport config from \"../config\";\nimport \"./NewInference.css\";\nimport { API } from \"aws-amplify\";\nimport { onError } from \"../libs/errorLib\";\nimport { Link } from \"react-router-dom\";\n\nexport default function NewInference() {\n  const file = useRef(null);\n  const [result, setResult] = useState(null);\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(false);\n\n  function handleFileChange(event) {\n    file.current = event.target.files[0];\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    setIsLoading(true);\n    const image = file.current;\n  \n    try {\n      const response = await inference(image);\n      setResult(response.name);\n      setIsLoading(false)\n      /* history.push(\"/result\"); */\n        \n    } catch (e) {\n        onError(e);\n        setIsLoading(false);\n      } \n  }\n  \n  /* headers: {\n    \"Access-Control-Allow-Origin\": \"*\",\n    \"Access-Control-Allow-Credentials\": \"True\",\n    'Content-Type': 'image/png'\n  }, */\n  \n  function inference(image) {\n    return API.post(\"inference\", ``, {\n        body: image\n    });\n  }\n\n  return (\n    <div className=\"NewInference\">\n      <form onSubmit={handleSubmit}>\n        <FormGroup controlId=\"imageFile\">\n          <ControlLabel>{result}</ControlLabel>\n          <FormControl onChange={handleFileChange} type=\"file\" />\n        </FormGroup>\n        <LoaderButton\n          block\n          type=\"submit\"\n          bsSize=\"large\"\n          bsStyle=\"primary\"\n          isLoading={isLoading}\n        >\n         Detect\n        </LoaderButton>\n      </form>\n      \n    </div>\n  );\n  }"]},"metadata":{},"sourceType":"module"}