{"ast":null,"code":"var _jsxFileName = \"/Users/alicjamazur/Desktop/work-in-progress/app-yolov2-client /src/containers/Architecture.js\";\nimport React, { useRef, useState } from \"react\";\nimport { Button, ButtonToolbar } from \"react-bootstrap\";\nimport { Tooltip, OverlayTrigger, Overlay } from \"react-bootstrap\";\nimport { Popover } from \"react-bootstrap\";\nimport ImageMapper from 'react-image-mapper';\nimport \"./Architecture.css\";\nexport default function Architecture() {\n  const [popover, setPopover] = useState(\"p1\");\n  const URL = \"https://demo-object-detection-app.s3.amazonaws.com/architecture3.png\";\n  const MAP = {\n    name: \"my-map\",\n    areas: [{\n      name: \"1\",\n      shape: \"circle\",\n      coords: [137, 58, 10],\n      strokeColor: \"green\"\n    }, {\n      name: \"2\",\n      shape: \"circle\",\n      coords: [247, 198.5, 10],\n      strokeColor: \"green\"\n    }, {\n      name: \"3\",\n      shape: \"circle\",\n      coords: [485, 198, 10],\n      strokeColor: \"green\"\n    }, {\n      name: \"4\",\n      shape: \"circle\",\n      coords: [621, 330.5, 10],\n      strokeColor: \"green\"\n    }, {\n      name: \"5\",\n      shape: \"circle\",\n      coords: [484, 259, 10],\n      strokeColor: \"green\"\n    }, {\n      name: \"6\",\n      shape: \"circle\",\n      coords: [250, 259, 10],\n      strokeColor: \"green\"\n    }]\n  };\n\n  function choosePopover(pId) {\n    const popoverContent = {\n      \"p1\": \"The browser downloads and stores the static content that forms this website. \\\n            The user interface is written in React.js, while runtime environment uses Node.js platform. \\\n            Open-source AWS framework Amplify is used to make API calls.\",\n      \"p2\": \"Within a click of a button the uploaded image is base64 encoded for safe transport through the web \\\n            and AWS Amplify makes a REST API call to API Gateway, set up as Lambda Proxy integration.\",\n      \"p3\": \"API Gateway invokes Lambda function that hosts Python code used to make machine learning inference.\",\n      \"p4\": \"The inference code was written by me during the “Deep Learning Specialization” course on coursera.org, inspired by this project of Allan Zelener. \\\n            To make predictions I use trained machine learning model YOLOv2 available here, authored by Joseph Redmon. \\\n            YOLOv2 detects thousands of potential objects on the input image by specifying bounding box coordinates relative to image dimensions. \\\n            Thanks to non-max-suppression technique, Lambda outputs only the most probable predictions.\\\n            Due to bulky both model weights and library dependencies, Amazon EFS is used to extend Lambda storage space.\",\n      \"p5\": \"Lambda returns the input image with drawn bounding boxes and marked labels to indicate predicted objects. For safe web transport to the user, the image is again base64 encoded.\",\n      \"p6\": \"API Gateway passes the response generated by Lambda to the front-end.\"\n    };\n    const popoverTitle = {\n      \"p1\": \"Static website hosting on S3\",\n      \"p2\": \"API Gateway call via Amplify\",\n      \"p3\": \"API Lambda Proxy integration\",\n      \"p4\": \"Lambda intergrated with EFS for machine learning inference\",\n      \"p5\": \"Lambda integration response\",\n      \"p6\": \"API Gateway response via Amplify\"\n    };\n    const index = popover.toString();\n    return /*#__PURE__*/React.createElement(Popover, {\n      id: popover,\n      title: popoverTitle[index],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }\n    }, popoverContent[index]);\n  }\n\n  const header = \"The app is built on top of serverless-stack bundle, a part of the Serverless Stack open-source project developed by Anomaly Detection. \\\n                 They created a step-by-step guide to create a full-stack serverless application hosted on AWS. You can check it out here.\";\n\n  function handleClick(event) {\n    setPopover('p' + event.name);\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(\"body\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, \" \", header), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n    trigger: \"focus\",\n    placement: \"right\",\n    onClick: handleClick,\n    overlay: choosePopover(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ImageMapper, {\n    src: URL,\n    map: MAP,\n    width: 794,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }))));\n} // Popoover on the left upper corner\n// export default function Architecture() {\n//   const [show, setShow] = useState(false);\n//   const [target, setTarget] = useState(null);\n//   const ref = useRef(null);\n//   function handleClick(event) {\n//     setShow(!show);\n//     setTarget(event.target);\n//     console.log(\"Ref: \", ref.current);\n//     console.log(\"Target: \", event.target);\n//   }\n//   return (\n//     <body>\n//     <div  >\n//       <img class=\"image\" src={require(\"./architecture3.png\")}\n//             alt=\"App architecture\" \n//             height=\"562\"\n//             weight=\"644\"\n//             usemap=\"#image-map\">\n//       </img>\n// <map  name=\"image-map\">\n// <area ref={ref} target=\"_self\" alt=\"1\" onClick={handleClick}  href=\"#\" coords=\"133,58,20\" shape=\"circle\" />\n// <area ref={ref} target=\"_self\" alt=\"2\" title=\"2\" onClick={handleClick} href=\"#\" coords=\"247,198.5,20\" shape=\"circle\" />\n// </map>  \n//     </div>\n//     <div>\n//       <Overlay\n//         show={show}\n//         target={target}\n//         placement=\"bottom\"\n//         container={ref.current}\n//         containerPadding={0}\n//       >\n//         <Popover id=\"popover1\" title=\"Popover bottom\" >\n//           <strong>Holy guacamole!</strong>\n//         </Popover>\n//       </Overlay>\n//     </div>\n//     </body>\n//   );\n// }\n// This works\n// export default function Architecture() {\n//   const popoverLeft = (\n//     <Popover id=\"popover-positioned-left\" title=\"Popover left\">\n//       <strong>Holy guacamole!</strong> Check this info.\n//     </Popover>\n//   );\n//   return (\n//     <OverlayTrigger trigger=\"click\" placement=\"right\" overlay={popoverLeft}>\n//       <Button>Holy guacamole!</Button>\n//     </OverlayTrigger>\n//   );\n// }\n// export default function HowItWorks() {  \n// export default function Architecture() {\n//   const [show, setShow] = useState(false);\n//   const [target, setTarget] = useState(null);\n//   const ref = useRef(null);\n//   function handleClick(event) {\n//     setShow(!show);\n//     setTarget(event.target);\n//     // console.log(event.target);\n//     // alert(\"Hello\");\n//   };\n//   return (\n//     <div ref={ref}>\n//       <Button onClick={handleClick}>Holy guacamole!</Button>\n//       <Overlay\n//         show={show}\n//         target={target}\n//         placement=\"bottom\"\n//         container={ref.current}\n//         containerPadding={20}\n//       >\n//       </Overlay> */}\n//      </div>\n//   );\n// }\n// <h5> Click on a number to learn more on the workflow. </h5>\n//       <img class=\"image\" src={require(\"./architecture3.png\")}\n//           alt=\"App architecture\" \n//           height=\"562\"\n//           weight=\"644\"\n//           usemap=\"#image-map\">\n//       </img>\n// <map name=\"image-map\">\n//       <area target=\"_self\"  id=\"popover1\" alt=\"1\" title=\"1\" onClick={handleClick} href=\"#\" coords=\"133,58,20\" shape=\"circle\" />\n//       </map>\n// <area target=\"_blank\" alt=\"2\" title=\"2\" href=\"#\" coords=\"247,198.5,20\" shape=\"circle\" />\n//       <area target=\"_blank\" alt=\"3\" title=\"3\" href=\"3\" coords=\"485,198.5,20\" shape=\"circle\" />\n//       <area target=\"_blank\" alt=\"4\" title=\"4\" href=\"4\" coords=\"621,330.5,20\" shape=\"circle\" />\n//       <area target=\"_blank\" alt=\"5\" title=\"5\" href=\"5\" coords=\"484,259,20\" shape=\"circle\" />\n//       <area target=\"_blank\" alt=\"6\" title=\"6\" href=\"6\" coords=\"250,259,20\" shape=\"circle\" />","map":{"version":3,"sources":["/Users/alicjamazur/Desktop/work-in-progress/app-yolov2-client /src/containers/Architecture.js"],"names":["React","useRef","useState","Button","ButtonToolbar","Tooltip","OverlayTrigger","Overlay","Popover","ImageMapper","Architecture","popover","setPopover","URL","MAP","name","areas","shape","coords","strokeColor","choosePopover","pId","popoverContent","popoverTitle","index","toString","header","handleClick","event"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,QAAwC,OAAxC;AACA,SAASC,MAAT,EAAiBC,aAAjB,QAAsC,iBAAtC;AACA,SAASC,OAAT,EAAkBC,cAAlB,EAAkCC,OAAlC,QAAiD,iBAAjD;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AAEA,OAAO,oBAAP;AAEA,eAAe,SAASC,YAAT,GAAwB;AAErC,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAMW,GAAG,GAAG,sEAAZ;AAEA,QAAMC,GAAG,GAAG;AACVC,IAAAA,IAAI,EAAE,QADI;AAEVC,IAAAA,KAAK,EAAE,CACL;AAAED,MAAAA,IAAI,EAAE,GAAR;AAAaE,MAAAA,KAAK,EAAE,QAApB;AAA8BC,MAAAA,MAAM,EAAE,CAAC,GAAD,EAAK,EAAL,EAAQ,EAAR,CAAtC;AAAmDC,MAAAA,WAAW,EAAE;AAAhE,KADK,EAEL;AAAEJ,MAAAA,IAAI,EAAE,GAAR;AAAaE,MAAAA,KAAK,EAAE,QAApB;AAA8BC,MAAAA,MAAM,EAAE,CAAC,GAAD,EAAK,KAAL,EAAW,EAAX,CAAtC;AAAsDC,MAAAA,WAAW,EAAE;AAAnE,KAFK,EAGL;AAAEJ,MAAAA,IAAI,EAAE,GAAR;AAAaE,MAAAA,KAAK,EAAE,QAApB;AAA8BC,MAAAA,MAAM,EAAE,CAAC,GAAD,EAAK,GAAL,EAAS,EAAT,CAAtC;AAAoDC,MAAAA,WAAW,EAAE;AAAjE,KAHK,EAIL;AAAEJ,MAAAA,IAAI,EAAE,GAAR;AAAaE,MAAAA,KAAK,EAAE,QAApB;AAA8BC,MAAAA,MAAM,EAAE,CAAC,GAAD,EAAK,KAAL,EAAW,EAAX,CAAtC;AAAsDC,MAAAA,WAAW,EAAE;AAAnE,KAJK,EAKL;AAAEJ,MAAAA,IAAI,EAAE,GAAR;AAAaE,MAAAA,KAAK,EAAE,QAApB;AAA8BC,MAAAA,MAAM,EAAE,CAAC,GAAD,EAAK,GAAL,EAAS,EAAT,CAAtC;AAAoDC,MAAAA,WAAW,EAAE;AAAjE,KALK,EAML;AAAEJ,MAAAA,IAAI,EAAE,GAAR;AAAaE,MAAAA,KAAK,EAAE,QAApB;AAA8BC,MAAAA,MAAM,EAAE,CAAC,GAAD,EAAK,GAAL,EAAS,EAAT,CAAtC;AAAoDC,MAAAA,WAAW,EAAE;AAAjE,KANK;AAFG,GAAZ;;AAYA,WAASC,aAAT,CAAuBC,GAAvB,EAA4B;AAE1B,UAAMC,cAAc,GAAG;AACrB,YAAM;;yEADe;AAKrB,YAAM;sGALe;AAQrB,YAAM,qGARe;AASrB,YAAM;;;;yHATe;AAerB,YAAM,kLAfe;AAiBrB,YAAM;AAjBe,KAAvB;AAoBA,UAAMC,YAAY,GAAG;AACnB,YAAM,8BADa;AAEnB,YAAM,8BAFa;AAGnB,YAAM,8BAHa;AAInB,YAAM,4DAJa;AAKnB,YAAM,6BALa;AAMnB,YAAM;AANa,KAArB;AASA,UAAMC,KAAK,GAAGb,OAAO,CAACc,QAAR,EAAd;AACA,wBACE,oBAAC,OAAD;AAAS,MAAA,EAAE,EAAEd,OAAb;AAAsB,MAAA,KAAK,EAAEY,YAAY,CAACC,KAAD,CAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGF,cAAc,CAACE,KAAD,CADjB,CADF;AAMD;;AACD,QAAME,MAAM,GAAG;2IAAf;;AAIA,WAASC,WAAT,CAAqBC,KAArB,EAA4B;AAC1BhB,IAAAA,UAAU,CAAC,MAAMgB,KAAK,CAACb,IAAb,CAAV;AACD;;AAAA;AAED,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAMW,MAAN,CADF,eAEE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,cAAD;AAAgB,IAAA,OAAO,EAAC,OAAxB;AAAgC,IAAA,SAAS,EAAC,OAA1C;AAAkD,IAAA,OAAO,EAAEC,WAA3D;AAAwE,IAAA,OAAO,EAAEP,aAAa,EAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAa,IAAA,GAAG,EAAEP,GAAlB;AAAuB,IAAA,GAAG,EAAEC,GAA5B;AAAiC,IAAA,KAAK,EAAE,GAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAFF,CADF;AAUD,C,CAGD;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACM;AACA;AACA;AACA;AAEN;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AAKE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { Button, ButtonToolbar } from \"react-bootstrap\";\nimport { Tooltip, OverlayTrigger, Overlay } from \"react-bootstrap\";\nimport { Popover } from \"react-bootstrap\";\nimport ImageMapper from 'react-image-mapper';\n\nimport \"./Architecture.css\";\n\nexport default function Architecture() {\n\n  const [popover, setPopover] = useState(\"p1\");\n  const URL = \"https://demo-object-detection-app.s3.amazonaws.com/architecture3.png\";\n  \n  const MAP = {\n    name: \"my-map\",\n    areas: [\n      { name: \"1\", shape: \"circle\", coords: [137,58,10], strokeColor: \"green\" },\n      { name: \"2\", shape: \"circle\", coords: [247,198.5,10], strokeColor: \"green\"  },\n      { name: \"3\", shape: \"circle\", coords: [485,198,10], strokeColor: \"green\"  },\n      { name: \"4\", shape: \"circle\", coords: [621,330.5,10], strokeColor: \"green\"  },\n      { name: \"5\", shape: \"circle\", coords: [484,259,10], strokeColor: \"green\" },\n      { name: \"6\", shape: \"circle\", coords: [250,259,10], strokeColor: \"green\" },\n    ]\n  };\n\n  function choosePopover(pId) {\n\n    const popoverContent = {\n      \"p1\": \"The browser downloads and stores the static content that forms this website. \\\n            The user interface is written in React.js, while runtime environment uses Node.js platform. \\\n            Open-source AWS framework Amplify is used to make API calls.\",\n            \n      \"p2\": \"Within a click of a button the uploaded image is base64 encoded for safe transport through the web \\\n            and AWS Amplify makes a REST API call to API Gateway, set up as Lambda Proxy integration.\",\n\n      \"p3\": \"API Gateway invokes Lambda function that hosts Python code used to make machine learning inference.\",\n      \"p4\": \"The inference code was written by me during the “Deep Learning Specialization” course on coursera.org, inspired by this project of Allan Zelener. \\\n            To make predictions I use trained machine learning model YOLOv2 available here, authored by Joseph Redmon. \\\n            YOLOv2 detects thousands of potential objects on the input image by specifying bounding box coordinates relative to image dimensions. \\\n            Thanks to non-max-suppression technique, Lambda outputs only the most probable predictions.\\\n            Due to bulky both model weights and library dependencies, Amazon EFS is used to extend Lambda storage space.\",\n\n      \"p5\": \"Lambda returns the input image with drawn bounding boxes and marked labels to indicate predicted objects. For safe web transport to the user, the image is again base64 encoded.\",\n\n      \"p6\": \"API Gateway passes the response generated by Lambda to the front-end.\"\n    };\n    \n    const popoverTitle = {\n      \"p1\": \"Static website hosting on S3\",\n      \"p2\": \"API Gateway call via Amplify\",\n      \"p3\": \"API Lambda Proxy integration\",\n      \"p4\": \"Lambda intergrated with EFS for machine learning inference\",\n      \"p5\": \"Lambda integration response\",\n      \"p6\": \"API Gateway response via Amplify\"\n    };\n    \n    const index = popover.toString();\n    return (\n      <Popover id={popover} title={popoverTitle[index]} >\n        {popoverContent[index]}\n      </Popover>\n    );\n  \n  }\n  const header = \"The app is built on top of serverless-stack bundle, a part of the Serverless Stack open-source project developed by Anomaly Detection. \\\n                 They created a step-by-step guide to create a full-stack serverless application hosted on AWS. You can check it out here.\"\n\n\n  function handleClick(event) {\n    setPopover('p' + event.name);\n  };\n\n  return (\n    <body>\n      <p> { header }</p>\n      <div className=\"image\">\n        <OverlayTrigger trigger=\"focus\" placement=\"right\" onClick={handleClick} overlay={choosePopover()}>\n          <ImageMapper src={URL} map={MAP} width={794}/>\n        </OverlayTrigger>\n      </div>\n    </body>\n  );\n}\n\n\n// Popoover on the left upper corner\n// export default function Architecture() {\n\n//   const [show, setShow] = useState(false);\n//   const [target, setTarget] = useState(null);\n//   const ref = useRef(null);\n\n//   function handleClick(event) {\n//     setShow(!show);\n//     setTarget(event.target);\n//     console.log(\"Ref: \", ref.current);\n//     console.log(\"Target: \", event.target);\n\n//   }\n\n\n//   return (\n//     <body>\n//     <div  >\n//       <img class=\"image\" src={require(\"./architecture3.png\")}\n//             alt=\"App architecture\" \n//             height=\"562\"\n//             weight=\"644\"\n//             usemap=\"#image-map\">\n//       </img>\n      // <map  name=\"image-map\">\n      // <area ref={ref} target=\"_self\" alt=\"1\" onClick={handleClick}  href=\"#\" coords=\"133,58,20\" shape=\"circle\" />\n      // <area ref={ref} target=\"_self\" alt=\"2\" title=\"2\" onClick={handleClick} href=\"#\" coords=\"247,198.5,20\" shape=\"circle\" />\n      // </map>  \n\n//     </div>\n//     <div>\n      \n//       <Overlay\n//         show={show}\n//         target={target}\n//         placement=\"bottom\"\n//         container={ref.current}\n//         containerPadding={0}\n//       >\n//         <Popover id=\"popover1\" title=\"Popover bottom\" >\n//           <strong>Holy guacamole!</strong>\n//         </Popover>\n//       </Overlay>\n//     </div>\n//     </body>\n//   );\n// }\n\n\n// This works\n// export default function Architecture() {\n \n//   const popoverLeft = (\n//     <Popover id=\"popover-positioned-left\" title=\"Popover left\">\n//       <strong>Holy guacamole!</strong> Check this info.\n//     </Popover>\n//   );\n  \n//   return (\n//     <OverlayTrigger trigger=\"click\" placement=\"right\" overlay={popoverLeft}>\n//       <Button>Holy guacamole!</Button>\n//     </OverlayTrigger>\n\n//   );\n// }\n\n// export default function HowItWorks() {  \n\n// export default function Architecture() {\n//   const [show, setShow] = useState(false);\n//   const [target, setTarget] = useState(null);\n//   const ref = useRef(null);\n\n//   function handleClick(event) {\n  \n//     setShow(!show);\n//     setTarget(event.target);\n//     // console.log(event.target);\n//     // alert(\"Hello\");\n//   };\n\n//   return (\n//     <div ref={ref}>\n//       <Button onClick={handleClick}>Holy guacamole!</Button>\n\n//       <Overlay\n//         show={show}\n//         target={target}\n//         placement=\"bottom\"\n//         container={ref.current}\n//         containerPadding={20}\n        \n//       >\n  \n//       </Overlay> */}\n      \n//      </div>\n//   );\n// }\n\n\n\n\n  // <h5> Click on a number to learn more on the workflow. </h5>\n  //       <img class=\"image\" src={require(\"./architecture3.png\")}\n  //           alt=\"App architecture\" \n  //           height=\"562\"\n  //           weight=\"644\"\n  //           usemap=\"#image-map\">\n  //       </img>\n  // <map name=\"image-map\">\n  //       <area target=\"_self\"  id=\"popover1\" alt=\"1\" title=\"1\" onClick={handleClick} href=\"#\" coords=\"133,58,20\" shape=\"circle\" />\n  //       </map>\n\n  // <area target=\"_blank\" alt=\"2\" title=\"2\" href=\"#\" coords=\"247,198.5,20\" shape=\"circle\" />\n  //       <area target=\"_blank\" alt=\"3\" title=\"3\" href=\"3\" coords=\"485,198.5,20\" shape=\"circle\" />\n  //       <area target=\"_blank\" alt=\"4\" title=\"4\" href=\"4\" coords=\"621,330.5,20\" shape=\"circle\" />\n  //       <area target=\"_blank\" alt=\"5\" title=\"5\" href=\"5\" coords=\"484,259,20\" shape=\"circle\" />\n  //       <area target=\"_blank\" alt=\"6\" title=\"6\" href=\"6\" coords=\"250,259,20\" shape=\"circle\" />\n\n"]},"metadata":{},"sourceType":"module"}