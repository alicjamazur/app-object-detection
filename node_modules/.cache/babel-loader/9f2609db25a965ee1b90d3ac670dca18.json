{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alicjamazur/Desktop/work-in-progress/app-yolov2-client /node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alicjamazur/Desktop/work-in-progress/app-yolov2-client /node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/alicjamazur/Desktop/work-in-progress/app-yolov2-client /node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from\"react\";import{useHistory}from\"react-router-dom\";import{FormGroup,FormControl,ControlLabel}from\"react-bootstrap\";import LoaderButton from\"../components/LoaderButton\";import config from\"../config\";import\"./NewInference.css\";import{API}from\"aws-amplify\";import{onError}from\"../libs/errorLib\";import{Link}from\"react-router-dom\";export default function NewInference(){var file=useRef(null);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var history=useHistory();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];function handleFileChange(event){file.current=event.target.files[0];console.log(file.current);var reader=new FileReader();reader.readAsDataURL(file.current);reader.onloadend=function(){var base64string=reader.result;// console.log(\"Base64 String - \", base64string);\nvar imageBase64=base64string.substr(base64string.indexOf(',')+1);setImage(imageBase64);// console.log('Base64 String without Tags- ', imageBase64);\n};}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setIsLoading(true);_context.prev=2;_context.next=5;return inference(image);case 5:response=_context.sent;setResult(response);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);onError(_context.t0);case 12:setIsLoading(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return _handleSubmit.apply(this,arguments);}function inference(image){return API.post(\"inference\",\"\",{headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\"},body:image});}var data=result||\"Hello\";return/*#__PURE__*/React.createElement(\"div\",{className:\"NewInference\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(FormGroup,{controlId:\"imageFile\"},/*#__PURE__*/React.createElement(ControlLabel,null,\"File \"),/*#__PURE__*/React.createElement(FormControl,{onChange:handleFileChange,type:\"file\"})),/*#__PURE__*/React.createElement(LoaderButton,{block:true,type:\"submit\",bsSize:\"large\",bsStyle:\"primary\",isLoading:isLoading},\"Detect\")),/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"img\",{src:\"data:image/png;base64,\".concat(result)})));}","map":{"version":3,"sources":["/Users/alicjamazur/Desktop/work-in-progress/app-yolov2-client /src/containers/NewInference.js"],"names":["React","useRef","useState","useHistory","FormGroup","FormControl","ControlLabel","LoaderButton","config","API","onError","Link","NewInference","file","result","setResult","image","setImage","history","isLoading","setIsLoading","handleFileChange","event","current","target","files","console","log","reader","FileReader","readAsDataURL","onloadend","base64string","imageBase64","substr","indexOf","handleSubmit","preventDefault","inference","response","post","headers","body","data"],"mappings":"4hBAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,QAAxB,KAAwC,OAAxC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,SAAT,CAAoBC,WAApB,CAAiCC,YAAjC,KAAqD,iBAArD,CACA,MAAOC,CAAAA,YAAP,KAAyB,4BAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,MAAO,oBAAP,CACA,OAASC,GAAT,KAAoB,aAApB,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,cAAe,SAASC,CAAAA,YAAT,EAAwB,CACrC,GAAMC,CAAAA,IAAI,CAAGZ,MAAM,CAAC,IAAD,CAAnB,CADqC,cAETC,QAAQ,CAAC,IAAD,CAFC,wCAE9BY,MAF8B,eAEtBC,SAFsB,8BAGXb,QAAQ,CAAC,IAAD,CAHG,yCAG9Bc,KAH8B,eAGvBC,QAHuB,eAIrC,GAAMC,CAAAA,OAAO,CAAGf,UAAU,EAA1B,CAJqC,eAKHD,QAAQ,CAAC,KAAD,CALL,yCAK9BiB,SAL8B,eAKnBC,YALmB,eAQrC,QAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAAiC,CAC/BT,IAAI,CAACU,OAAL,CAAeD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAf,CACAC,OAAO,CAACC,GAAR,CAAYd,IAAI,CAACU,OAAjB,EAEA,GAAIK,CAAAA,MAAM,CAAG,GAAIC,CAAAA,UAAJ,EAAb,CACAD,MAAM,CAACE,aAAP,CAAqBjB,IAAI,CAACU,OAA1B,EACAK,MAAM,CAACG,SAAP,CAAmB,UAAW,CAC5B,GAAMC,CAAAA,YAAY,CAAGJ,MAAM,CAACd,MAA5B,CACA;AACA,GAAImB,CAAAA,WAAW,CAAGD,YAAY,CAACE,MAAb,CAAoBF,YAAY,CAACG,OAAb,CAAqB,GAArB,EAA4B,CAAhD,CAAlB,CACAlB,QAAQ,CAACgB,WAAD,CAAR,CACA;AACD,CAND,CAOD,CArBoC,QAuBtBG,CAAAA,YAvBsB,gJAuBrC,iBAA4Bd,KAA5B,+HACEA,KAAK,CAACe,cAAN,GAEAjB,YAAY,CAAC,IAAD,CAAZ,CAHF,sCAOyBkB,CAAAA,SAAS,CAACtB,KAAD,CAPlC,QAOQuB,QAPR,eAQIxB,SAAS,CAACwB,QAAD,CAAT,CARJ,+EAWI7B,OAAO,aAAP,CAXJ,QAaEU,YAAY,CAAC,KAAD,CAAZ,CAbF,oEAvBqC,+CAuCrC,QAASkB,CAAAA,SAAT,CAAmBtB,KAAnB,CAA0B,CACxB,MAAOP,CAAAA,GAAG,CAAC+B,IAAJ,CAAS,WAAT,IAA0B,CAC/BC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,SAAU,kBAFH,CADsB,CAK/BC,IAAI,CAAE1B,KALyB,CAA1B,CAAP,CAQD,CAGD,GAAI2B,CAAAA,IAAI,CAAG7B,MAAM,EAAI,OAArB,CAEA,mBACE,2BAAK,SAAS,CAAC,cAAf,eAEE,4BAAM,QAAQ,CAAEsB,YAAhB,eACE,oBAAC,SAAD,EAAW,SAAS,CAAC,WAArB,eACE,oBAAC,YAAD,cADF,cAEE,oBAAC,WAAD,EAAa,QAAQ,CAAEf,gBAAvB,CAAyC,IAAI,CAAC,MAA9C,EAFF,CADF,cAKE,oBAAC,YAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,QAFP,CAGE,MAAM,CAAC,OAHT,CAIE,OAAO,CAAC,SAJV,CAKE,SAAS,CAAEF,SALb,WALF,CAFF,cAiBE,2CACE,2BAAK,GAAG,iCAA2BL,MAA3B,CAAR,EADF,CAjBF,CADF,CAwBC","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport config from \"../config\";\nimport \"./NewInference.css\";\nimport { API } from \"aws-amplify\";\nimport { onError } from \"../libs/errorLib\";\nimport { Link } from \"react-router-dom\";\n\nexport default function NewInference() {\n  const file = useRef(null);\n  const [result, setResult] = useState(null);\n  const [image, setImage] = useState(null);\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(false);\n  \n\n  function handleFileChange(event) {\n    file.current = event.target.files[0];\n    console.log(file.current);\n\n    var reader = new FileReader();\n    reader.readAsDataURL(file.current);\n    reader.onloadend = function() {\n      const base64string = reader.result;\n      // console.log(\"Base64 String - \", base64string);\n      var imageBase64 = base64string.substr(base64string.indexOf(',') + 1);\n      setImage(imageBase64);\n      // console.log('Base64 String without Tags- ', imageBase64);\n    }\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    setIsLoading(true);\n\n    try {\n    // Method 1\n      let response = await inference(image);\n      setResult(response);\n    \n    } catch (e) {\n      onError(e);\n    }\n    setIsLoading(false);\n  }\n  \n  function inference(image) {\n    return API.post(\"inference\", ``, {\n      headers: {\n        \"Content-Type\": \"application/json\", \n        \"Accept\": \"application/json\"\n      },\n      body: image\n    });\n    \n  }\n\n  \n  var data = result || \"Hello\";\n  \n  return (\n    <div className=\"NewInference\">\n\n      <form onSubmit={handleSubmit}>\n        <FormGroup controlId=\"imageFile\">\n          <ControlLabel>File </ControlLabel>\n          <FormControl onChange={handleFileChange} type=\"file\" />\n        </FormGroup>\n        <LoaderButton\n          block\n          type=\"submit\"\n          bsSize=\"large\"\n          bsStyle=\"primary\"\n          isLoading={isLoading}\n        >\n         Detect\n        </LoaderButton>\n      </form>\n      <h4>\n        <img src={`data:image/png;base64,${result}`} />\n      </h4>\n    \n    </div>\n  );\n  }"]},"metadata":{},"sourceType":"module"}