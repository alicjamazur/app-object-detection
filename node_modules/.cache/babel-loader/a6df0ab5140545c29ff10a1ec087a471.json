{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _get = function get(_x, _x2, _x3) {\n  var _again = true;\n\n  _function: while (_again) {\n    var object = _x,\n        property = _x2,\n        receiver = _x3;\n    _again = false;\n    if (object === null) object = Function.prototype;\n    var desc = Object.getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        _x = parent;\n        _x2 = property;\n        _x3 = receiver;\n        _again = true;\n        desc = parent = undefined;\n        continue _function;\n      }\n    } else if (\"value\" in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  }\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactFastCompare = require(\"react-fast-compare\");\n\nvar _reactFastCompare2 = _interopRequireDefault(_reactFastCompare);\n\nvar ImageMapper = function (_Component) {\n  _inherits(ImageMapper, _Component);\n\n  function ImageMapper(props) {\n    var _this = this;\n\n    _classCallCheck(this, ImageMapper);\n\n    _get(Object.getPrototypeOf(ImageMapper.prototype), \"constructor\", this).call(this, props);\n\n    [\"drawrect\", \"drawcircle\", \"drawpoly\", \"initCanvas\", \"renderPrefilledAreas\"].forEach(function (f) {\n      return _this[f] = _this[f].bind(_this);\n    });\n    var absPos = {\n      position: \"absolute\",\n      top: 0,\n      left: 0\n    };\n    this.styles = {\n      container: {\n        position: \"relative\"\n      },\n      canvas: _extends({}, absPos, {\n        pointerEvents: \"none\",\n        zIndex: 2\n      }),\n      img: _extends({}, absPos, {\n        zIndex: 1,\n        userSelect: \"none\"\n      }),\n      map: props.onClick && {\n        cursor: \"pointer\"\n      } || undefined\n    }; // Props watched for changes to trigger update\n\n    this.watchedProps = [\"active\", \"fillColor\", \"height\", \"imgWidth\", \"lineWidth\", \"src\", \"strokeColor\", \"width\"];\n  }\n\n  _createClass(ImageMapper, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var _this2 = this;\n\n      var propChanged = this.watchedProps.some(function (prop) {\n        return _this2.props[prop] !== nextProps[prop];\n      });\n      return !(0, _reactFastCompare2[\"default\"])(this.props.map, this.state.map) || propChanged;\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.updateCacheMap();\n    }\n  }, {\n    key: \"updateCacheMap\",\n    value: function updateCacheMap() {\n      this.setState({\n        map: JSON.parse(JSON.stringify(this.props.map))\n      }, this.initCanvas);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.updateCacheMap();\n      this.initCanvas();\n    }\n  }, {\n    key: \"drawrect\",\n    value: function drawrect(coords, fillColor, lineWidth, strokeColor) {\n      var _coords = _slicedToArray(coords, 4);\n\n      var left = _coords[0];\n      var top = _coords[1];\n      var right = _coords[2];\n      var bot = _coords[3];\n      this.ctx.fillStyle = fillColor;\n      this.ctx.lineWidth = lineWidth;\n      this.ctx.strokeStyle = strokeColor;\n      this.ctx.strokeRect(left, top, right - left, bot - top);\n      this.ctx.fillRect(left, top, right - left, bot - top);\n      this.ctx.fillStyle = this.props.fillColor;\n    }\n  }, {\n    key: \"drawcircle\",\n    value: function drawcircle(coords, fillColor, lineWidth, strokeColor) {\n      this.ctx.fillStyle = fillColor;\n      this.ctx.beginPath();\n      this.ctx.lineWidth = lineWidth;\n      this.ctx.strokeStyle = strokeColor;\n      this.ctx.arc(coords[0], coords[1], coords[2], 0, 2 * Math.PI);\n      this.ctx.closePath();\n      this.ctx.stroke();\n      this.ctx.fill();\n      this.ctx.fillStyle = this.props.fillColor;\n    }\n  }, {\n    key: \"drawpoly\",\n    value: function drawpoly(coords, fillColor, lineWidth, strokeColor) {\n      var _this3 = this;\n\n      coords = coords.reduce(function (a, v, i, s) {\n        return i % 2 ? a : [].concat(_toConsumableArray(a), [s.slice(i, i + 2)]);\n      }, []);\n      this.ctx.fillStyle = fillColor;\n      this.ctx.beginPath();\n      this.ctx.lineWidth = lineWidth;\n      this.ctx.strokeStyle = strokeColor;\n      var first = coords.unshift();\n      this.ctx.moveTo(first[0], first[1]);\n      coords.forEach(function (c) {\n        return _this3.ctx.lineTo(c[0], c[1]);\n      });\n      this.ctx.closePath();\n      this.ctx.stroke();\n      this.ctx.fill();\n      this.ctx.fillStyle = this.props.fillColor;\n    }\n  }, {\n    key: \"initCanvas\",\n    value: function initCanvas() {\n      if (this.props.width) this.img.width = this.props.width;\n      if (this.props.height) this.img.height = this.props.height;\n      this.canvas.width = this.props.width || this.img.clientWidth;\n      this.canvas.height = this.props.height || this.img.clientHeight;\n      this.container.style.width = (this.props.width || this.img.clientWidth) + \"px\";\n      this.container.style.height = (this.props.height || this.img.clientHeight) + \"px\";\n      this.ctx = this.canvas.getContext(\"2d\");\n      this.ctx.fillStyle = this.props.fillColor; //this.ctx.strokeStyle = this.props.strokeColor;\n\n      if (this.props.onLoad) this.props.onLoad();\n      this.renderPrefilledAreas();\n    }\n  }, {\n    key: \"hoverOn\",\n    value: function hoverOn(area, index, event) {\n      var shape = event.target.getAttribute(\"shape\");\n\n      if (this.props.active && this[\"draw\" + shape]) {\n        this[\"draw\" + shape](event.target.getAttribute(\"coords\").split(\",\"), area.fillColor, area.lineWidth || this.props.lineWidth, area.strokeColor || this.props.strokeColor);\n      }\n\n      if (this.props.onMouseEnter) this.props.onMouseEnter(area, index, event);\n    }\n  }, {\n    key: \"hoverOff\",\n    value: function hoverOff(area, index, event) {\n      if (this.props.active) {\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this.renderPrefilledAreas();\n      }\n\n      if (this.props.onMouseLeave) this.props.onMouseLeave(area, index, event);\n    }\n  }, {\n    key: \"click\",\n    value: function click(area, index, event) {\n      if (this.props.onClick) {\n        event.preventDefault();\n        this.props.onClick(area, index, event);\n      }\n    }\n  }, {\n    key: \"imageClick\",\n    value: function imageClick(event) {\n      if (this.props.onImageClick) {\n        event.preventDefault();\n        this.props.onImageClick(event);\n      }\n    }\n  }, {\n    key: \"mouseMove\",\n    value: function mouseMove(area, index, event) {\n      if (this.props.onMouseMove) {\n        this.props.onMouseMove(area, index, event);\n      }\n    }\n  }, {\n    key: \"imageMouseMove\",\n    value: function imageMouseMove(area, index, event) {\n      if (this.props.onImageMouseMove) {\n        this.props.onImageMouseMove(area, index, event);\n      }\n    }\n  }, {\n    key: \"scaleCoords\",\n    value: function scaleCoords(coords) {\n      var _props = this.props;\n      var imgWidth = _props.imgWidth;\n      var width = _props.width; // calculate scale based on current 'width' and the original 'imgWidth'\n\n      var scale = width && imgWidth && imgWidth > 0 ? width / imgWidth : 1;\n      return coords.map(function (coord) {\n        return coord * scale;\n      });\n    }\n  }, {\n    key: \"renderPrefilledAreas\",\n    value: function renderPrefilledAreas() {\n      var _this4 = this;\n\n      this.state.map.areas.map(function (area) {\n        if (!area.preFillColor) return;\n\n        _this4[\"draw\" + area.shape](_this4.scaleCoords(area.coords), area.preFillColor, area.lineWidth || _this4.props.lineWidth, area.strokeColor || _this4.props.strokeColor);\n      });\n    }\n  }, {\n    key: \"computeCenter\",\n    value: function computeCenter(area) {\n      if (!area) return [0, 0];\n      var scaledCoords = this.scaleCoords(area.coords);\n\n      switch (area.shape) {\n        case \"circle\":\n          return [scaledCoords[0], scaledCoords[1]];\n\n        case \"poly\":\n        case \"rect\":\n        default:\n          {\n            var _ret = function () {\n              // Calculate centroid\n              var n = scaledCoords.length / 2;\n\n              var _scaledCoords$reduce = scaledCoords.reduce(function (_ref, val, idx) {\n                var y = _ref.y;\n                var x = _ref.x;\n                return !(idx % 2) ? {\n                  y: y,\n                  x: x + val / n\n                } : {\n                  y: y + val / n,\n                  x: x\n                };\n              }, {\n                y: 0,\n                x: 0\n              });\n\n              var y = _scaledCoords$reduce.y;\n              var x = _scaledCoords$reduce.x;\n              return {\n                v: [x, y]\n              };\n            }();\n\n            if (typeof _ret === \"object\") return _ret.v;\n          }\n      }\n    }\n  }, {\n    key: \"renderAreas\",\n    value: function renderAreas() {\n      var _this5 = this;\n\n      return this.state.map.areas.map(function (area, index) {\n        var scaledCoords = _this5.scaleCoords(area.coords);\n\n        var center = _this5.computeCenter(area);\n\n        var extendedArea = _extends({}, area, {\n          scaledCoords: scaledCoords,\n          center: center\n        });\n\n        return _react2[\"default\"].createElement(\"area\", {\n          key: area._id || index,\n          shape: area.shape,\n          coords: scaledCoords.join(\",\"),\n          onMouseEnter: _this5.hoverOn.bind(_this5, extendedArea, index),\n          onMouseLeave: _this5.hoverOff.bind(_this5, extendedArea, index),\n          onMouseMove: _this5.mouseMove.bind(_this5, extendedArea, index),\n          onClick: _this5.click.bind(_this5, extendedArea, index),\n          href: area.href\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return _react2[\"default\"].createElement(\"div\", {\n        style: this.styles.container,\n        ref: function ref(node) {\n          return _this6.container = node;\n        }\n      }, _react2[\"default\"].createElement(\"img\", {\n        style: this.styles.img,\n        src: this.props.src,\n        useMap: \"#\" + this.state.map.name,\n        alt: \"\",\n        ref: function ref(node) {\n          return _this6.img = node;\n        },\n        onLoad: this.initCanvas,\n        onClick: this.imageClick.bind(this),\n        onMouseMove: this.imageMouseMove.bind(this)\n      }), _react2[\"default\"].createElement(\"canvas\", {\n        ref: function ref(node) {\n          return _this6.canvas = node;\n        },\n        style: this.styles.canvas\n      }), _react2[\"default\"].createElement(\"map\", {\n        name: this.state.map.name,\n        style: this.styles.map\n      }, this.renderAreas()));\n    }\n  }]);\n\n  return ImageMapper;\n}(_react.Component);\n\nexports[\"default\"] = ImageMapper;\nImageMapper.defaultProps = {\n  active: true,\n  fillColor: \"rgba(255, 255, 255, 0.5)\",\n  lineWidth: 1,\n  map: {\n    areas: [],\n    name: \"image-map-\" + Math.random()\n  },\n  strokeColor: \"rgba(0, 0, 0, 0.5)\"\n};\nImageMapper.propTypes = {\n  active: _propTypes2[\"default\"].bool,\n  fillColor: _propTypes2[\"default\"].string,\n  height: _propTypes2[\"default\"].number,\n  imgWidth: _propTypes2[\"default\"].number,\n  lineWidth: _propTypes2[\"default\"].number,\n  src: _propTypes2[\"default\"].string.isRequired,\n  strokeColor: _propTypes2[\"default\"].string,\n  width: _propTypes2[\"default\"].number,\n  onClick: _propTypes2[\"default\"].func,\n  onMouseMove: _propTypes2[\"default\"].func,\n  onImageClick: _propTypes2[\"default\"].func,\n  onImageMouseMove: _propTypes2[\"default\"].func,\n  onLoad: _propTypes2[\"default\"].func,\n  onMouseEnter: _propTypes2[\"default\"].func,\n  onMouseLeave: _propTypes2[\"default\"].func,\n  map: _propTypes2[\"default\"].shape({\n    areas: _propTypes2[\"default\"].arrayOf(_propTypes2[\"default\"].shape({\n      area: _propTypes2[\"default\"].shape({\n        coords: _propTypes2[\"default\"].arrayOf(_propTypes2[\"default\"].number),\n        href: _propTypes2[\"default\"].string,\n        shape: _propTypes2[\"default\"].string,\n        preFillColor: _propTypes2[\"default\"].string,\n        fillColor: _propTypes2[\"default\"].string\n      })\n    })),\n    name: _propTypes2[\"default\"].string\n  })\n};\nmodule.exports = exports[\"default\"];","map":{"version":3,"sources":["/Users/alicjamazur/Desktop/projects/app-object-detection/web-app/node_modules/react-image-mapper/lib/ImageMapper.js"],"names":["Object","defineProperty","exports","value","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_extends","assign","target","arguments","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_get","get","_x","_x2","_x3","_again","_function","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_interopRequireDefault","obj","__esModule","_toConsumableArray","arr2","from","_classCallCheck","instance","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_react","require","_react2","_propTypes","_propTypes2","_reactFastCompare","_reactFastCompare2","ImageMapper","_Component","_this","forEach","f","bind","absPos","position","top","left","styles","container","canvas","pointerEvents","zIndex","img","userSelect","map","onClick","cursor","watchedProps","shouldComponentUpdate","nextProps","_this2","propChanged","some","prop","state","componentWillMount","updateCacheMap","setState","JSON","parse","stringify","initCanvas","componentDidUpdate","drawrect","coords","fillColor","lineWidth","strokeColor","_coords","right","bot","ctx","fillStyle","strokeStyle","strokeRect","fillRect","drawcircle","beginPath","arc","Math","PI","closePath","stroke","fill","drawpoly","_this3","reduce","a","v","s","concat","slice","first","unshift","moveTo","c","lineTo","width","height","clientWidth","clientHeight","style","getContext","onLoad","renderPrefilledAreas","hoverOn","area","index","event","shape","getAttribute","active","split","onMouseEnter","hoverOff","clearRect","onMouseLeave","click","preventDefault","imageClick","onImageClick","mouseMove","onMouseMove","imageMouseMove","onImageMouseMove","scaleCoords","_props","imgWidth","scale","coord","_this4","areas","preFillColor","computeCenter","scaledCoords","_ret","n","_scaledCoords$reduce","_ref","val","idx","y","x","renderAreas","_this5","center","extendedArea","createElement","_id","join","href","render","_this6","ref","node","src","useMap","name","alt","Component","defaultProps","random","propTypes","bool","string","number","isRequired","func","arrayOf","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; })();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactFastCompare = require(\"react-fast-compare\");\n\nvar _reactFastCompare2 = _interopRequireDefault(_reactFastCompare);\n\nvar ImageMapper = (function (_Component) {\n\t_inherits(ImageMapper, _Component);\n\n\tfunction ImageMapper(props) {\n\t\tvar _this = this;\n\n\t\t_classCallCheck(this, ImageMapper);\n\n\t\t_get(Object.getPrototypeOf(ImageMapper.prototype), \"constructor\", this).call(this, props);\n\t\t[\"drawrect\", \"drawcircle\", \"drawpoly\", \"initCanvas\", \"renderPrefilledAreas\"].forEach(function (f) {\n\t\t\treturn _this[f] = _this[f].bind(_this);\n\t\t});\n\t\tvar absPos = { position: \"absolute\", top: 0, left: 0 };\n\t\tthis.styles = {\n\t\t\tcontainer: { position: \"relative\" },\n\t\t\tcanvas: _extends({}, absPos, { pointerEvents: \"none\", zIndex: 2 }),\n\t\t\timg: _extends({}, absPos, { zIndex: 1, userSelect: \"none\" }),\n\t\t\tmap: props.onClick && { cursor: \"pointer\" } || undefined\n\t\t};\n\t\t// Props watched for changes to trigger update\n\t\tthis.watchedProps = [\"active\", \"fillColor\", \"height\", \"imgWidth\", \"lineWidth\", \"src\", \"strokeColor\", \"width\"];\n\t}\n\n\t_createClass(ImageMapper, [{\n\t\tkey: \"shouldComponentUpdate\",\n\t\tvalue: function shouldComponentUpdate(nextProps) {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar propChanged = this.watchedProps.some(function (prop) {\n\t\t\t\treturn _this2.props[prop] !== nextProps[prop];\n\t\t\t});\n\t\t\treturn !(0, _reactFastCompare2[\"default\"])(this.props.map, this.state.map) || propChanged;\n\t\t}\n\t}, {\n\t\tkey: \"componentWillMount\",\n\t\tvalue: function componentWillMount() {\n\t\t\tthis.updateCacheMap();\n\t\t}\n\t}, {\n\t\tkey: \"updateCacheMap\",\n\t\tvalue: function updateCacheMap() {\n\t\t\tthis.setState({ map: JSON.parse(JSON.stringify(this.props.map)) }, this.initCanvas);\n\t\t}\n\t}, {\n\t\tkey: \"componentDidUpdate\",\n\t\tvalue: function componentDidUpdate() {\n\t\t\tthis.updateCacheMap();\n\t\t\tthis.initCanvas();\n\t\t}\n\t}, {\n\t\tkey: \"drawrect\",\n\t\tvalue: function drawrect(coords, fillColor, lineWidth, strokeColor) {\n\t\t\tvar _coords = _slicedToArray(coords, 4);\n\n\t\t\tvar left = _coords[0];\n\t\t\tvar top = _coords[1];\n\t\t\tvar right = _coords[2];\n\t\t\tvar bot = _coords[3];\n\n\t\t\tthis.ctx.fillStyle = fillColor;\n\t\t\tthis.ctx.lineWidth = lineWidth;\n\t\t\tthis.ctx.strokeStyle = strokeColor;\n\t\t\tthis.ctx.strokeRect(left, top, right - left, bot - top);\n\t\t\tthis.ctx.fillRect(left, top, right - left, bot - top);\n\t\t\tthis.ctx.fillStyle = this.props.fillColor;\n\t\t}\n\t}, {\n\t\tkey: \"drawcircle\",\n\t\tvalue: function drawcircle(coords, fillColor, lineWidth, strokeColor) {\n\t\t\tthis.ctx.fillStyle = fillColor;\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.lineWidth = lineWidth;\n\t\t\tthis.ctx.strokeStyle = strokeColor;\n\t\t\tthis.ctx.arc(coords[0], coords[1], coords[2], 0, 2 * Math.PI);\n\t\t\tthis.ctx.closePath();\n\t\t\tthis.ctx.stroke();\n\t\t\tthis.ctx.fill();\n\t\t\tthis.ctx.fillStyle = this.props.fillColor;\n\t\t}\n\t}, {\n\t\tkey: \"drawpoly\",\n\t\tvalue: function drawpoly(coords, fillColor, lineWidth, strokeColor) {\n\t\t\tvar _this3 = this;\n\n\t\t\tcoords = coords.reduce(function (a, v, i, s) {\n\t\t\t\treturn i % 2 ? a : [].concat(_toConsumableArray(a), [s.slice(i, i + 2)]);\n\t\t\t}, []);\n\n\t\t\tthis.ctx.fillStyle = fillColor;\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.lineWidth = lineWidth;\n\t\t\tthis.ctx.strokeStyle = strokeColor;\n\t\t\tvar first = coords.unshift();\n\t\t\tthis.ctx.moveTo(first[0], first[1]);\n\t\t\tcoords.forEach(function (c) {\n\t\t\t\treturn _this3.ctx.lineTo(c[0], c[1]);\n\t\t\t});\n\t\t\tthis.ctx.closePath();\n\t\t\tthis.ctx.stroke();\n\t\t\tthis.ctx.fill();\n\t\t\tthis.ctx.fillStyle = this.props.fillColor;\n\t\t}\n\t}, {\n\t\tkey: \"initCanvas\",\n\t\tvalue: function initCanvas() {\n\t\t\tif (this.props.width) this.img.width = this.props.width;\n\n\t\t\tif (this.props.height) this.img.height = this.props.height;\n\n\t\t\tthis.canvas.width = this.props.width || this.img.clientWidth;\n\t\t\tthis.canvas.height = this.props.height || this.img.clientHeight;\n\t\t\tthis.container.style.width = (this.props.width || this.img.clientWidth) + \"px\";\n\t\t\tthis.container.style.height = (this.props.height || this.img.clientHeight) + \"px\";\n\t\t\tthis.ctx = this.canvas.getContext(\"2d\");\n\t\t\tthis.ctx.fillStyle = this.props.fillColor;\n\t\t\t//this.ctx.strokeStyle = this.props.strokeColor;\n\n\t\t\tif (this.props.onLoad) this.props.onLoad();\n\n\t\t\tthis.renderPrefilledAreas();\n\t\t}\n\t}, {\n\t\tkey: \"hoverOn\",\n\t\tvalue: function hoverOn(area, index, event) {\n\t\t\tvar shape = event.target.getAttribute(\"shape\");\n\n\t\t\tif (this.props.active && this[\"draw\" + shape]) {\n\t\t\t\tthis[\"draw\" + shape](event.target.getAttribute(\"coords\").split(\",\"), area.fillColor, area.lineWidth || this.props.lineWidth, area.strokeColor || this.props.strokeColor);\n\t\t\t}\n\t\t\tif (this.props.onMouseEnter) this.props.onMouseEnter(area, index, event);\n\t\t}\n\t}, {\n\t\tkey: \"hoverOff\",\n\t\tvalue: function hoverOff(area, index, event) {\n\t\t\tif (this.props.active) {\n\t\t\t\tthis.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t\t\t\tthis.renderPrefilledAreas();\n\t\t\t}\n\n\t\t\tif (this.props.onMouseLeave) this.props.onMouseLeave(area, index, event);\n\t\t}\n\t}, {\n\t\tkey: \"click\",\n\t\tvalue: function click(area, index, event) {\n\t\t\tif (this.props.onClick) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.props.onClick(area, index, event);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: \"imageClick\",\n\t\tvalue: function imageClick(event) {\n\t\t\tif (this.props.onImageClick) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.props.onImageClick(event);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: \"mouseMove\",\n\t\tvalue: function mouseMove(area, index, event) {\n\t\t\tif (this.props.onMouseMove) {\n\t\t\t\tthis.props.onMouseMove(area, index, event);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: \"imageMouseMove\",\n\t\tvalue: function imageMouseMove(area, index, event) {\n\t\t\tif (this.props.onImageMouseMove) {\n\t\t\t\tthis.props.onImageMouseMove(area, index, event);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: \"scaleCoords\",\n\t\tvalue: function scaleCoords(coords) {\n\t\t\tvar _props = this.props;\n\t\t\tvar imgWidth = _props.imgWidth;\n\t\t\tvar width = _props.width;\n\n\t\t\t// calculate scale based on current 'width' and the original 'imgWidth'\n\t\t\tvar scale = width && imgWidth && imgWidth > 0 ? width / imgWidth : 1;\n\t\t\treturn coords.map(function (coord) {\n\t\t\t\treturn coord * scale;\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"renderPrefilledAreas\",\n\t\tvalue: function renderPrefilledAreas() {\n\t\t\tvar _this4 = this;\n\n\t\t\tthis.state.map.areas.map(function (area) {\n\t\t\t\tif (!area.preFillColor) return;\n\t\t\t\t_this4[\"draw\" + area.shape](_this4.scaleCoords(area.coords), area.preFillColor, area.lineWidth || _this4.props.lineWidth, area.strokeColor || _this4.props.strokeColor);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"computeCenter\",\n\t\tvalue: function computeCenter(area) {\n\t\t\tif (!area) return [0, 0];\n\n\t\t\tvar scaledCoords = this.scaleCoords(area.coords);\n\n\t\t\tswitch (area.shape) {\n\t\t\t\tcase \"circle\":\n\t\t\t\t\treturn [scaledCoords[0], scaledCoords[1]];\n\t\t\t\tcase \"poly\":\n\t\t\t\tcase \"rect\":\n\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _ret = (function () {\n\t\t\t\t\t\t\t// Calculate centroid\n\t\t\t\t\t\t\tvar n = scaledCoords.length / 2;\n\n\t\t\t\t\t\t\tvar _scaledCoords$reduce = scaledCoords.reduce(function (_ref, val, idx) {\n\t\t\t\t\t\t\t\tvar y = _ref.y;\n\t\t\t\t\t\t\t\tvar x = _ref.x;\n\n\t\t\t\t\t\t\t\treturn !(idx % 2) ? { y: y, x: x + val / n } : { y: y + val / n, x: x };\n\t\t\t\t\t\t\t}, { y: 0, x: 0 });\n\n\t\t\t\t\t\t\tvar y = _scaledCoords$reduce.y;\n\t\t\t\t\t\t\tvar x = _scaledCoords$reduce.x;\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tv: [x, y]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})();\n\n\t\t\t\t\t\tif (typeof _ret === \"object\") return _ret.v;\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: \"renderAreas\",\n\t\tvalue: function renderAreas() {\n\t\t\tvar _this5 = this;\n\n\t\t\treturn this.state.map.areas.map(function (area, index) {\n\t\t\t\tvar scaledCoords = _this5.scaleCoords(area.coords);\n\t\t\t\tvar center = _this5.computeCenter(area);\n\t\t\t\tvar extendedArea = _extends({}, area, { scaledCoords: scaledCoords, center: center });\n\t\t\t\treturn _react2[\"default\"].createElement(\"area\", {\n\t\t\t\t\tkey: area._id || index,\n\t\t\t\t\tshape: area.shape,\n\t\t\t\t\tcoords: scaledCoords.join(\",\"),\n\t\t\t\t\tonMouseEnter: _this5.hoverOn.bind(_this5, extendedArea, index),\n\t\t\t\t\tonMouseLeave: _this5.hoverOff.bind(_this5, extendedArea, index),\n\t\t\t\t\tonMouseMove: _this5.mouseMove.bind(_this5, extendedArea, index),\n\t\t\t\t\tonClick: _this5.click.bind(_this5, extendedArea, index),\n\t\t\t\t\thref: area.href\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"render\",\n\t\tvalue: function render() {\n\t\t\tvar _this6 = this;\n\n\t\t\treturn _react2[\"default\"].createElement(\n\t\t\t\t\"div\",\n\t\t\t\t{ style: this.styles.container, ref: function (node) {\n\t\t\t\t\t\treturn _this6.container = node;\n\t\t\t\t\t} },\n\t\t\t\t_react2[\"default\"].createElement(\"img\", {\n\t\t\t\t\tstyle: this.styles.img,\n\t\t\t\t\tsrc: this.props.src,\n\t\t\t\t\tuseMap: \"#\" + this.state.map.name,\n\t\t\t\t\talt: \"\",\n\t\t\t\t\tref: function (node) {\n\t\t\t\t\t\treturn _this6.img = node;\n\t\t\t\t\t},\n\t\t\t\t\tonLoad: this.initCanvas,\n\t\t\t\t\tonClick: this.imageClick.bind(this),\n\t\t\t\t\tonMouseMove: this.imageMouseMove.bind(this)\n\t\t\t\t}),\n\t\t\t\t_react2[\"default\"].createElement(\"canvas\", { ref: function (node) {\n\t\t\t\t\t\treturn _this6.canvas = node;\n\t\t\t\t\t}, style: this.styles.canvas }),\n\t\t\t\t_react2[\"default\"].createElement(\n\t\t\t\t\t\"map\",\n\t\t\t\t\t{ name: this.state.map.name, style: this.styles.map },\n\t\t\t\t\tthis.renderAreas()\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}]);\n\n\treturn ImageMapper;\n})(_react.Component);\n\nexports[\"default\"] = ImageMapper;\n\nImageMapper.defaultProps = {\n\tactive: true,\n\tfillColor: \"rgba(255, 255, 255, 0.5)\",\n\tlineWidth: 1,\n\tmap: {\n\t\tareas: [],\n\t\tname: \"image-map-\" + Math.random()\n\t},\n\tstrokeColor: \"rgba(0, 0, 0, 0.5)\"\n};\n\nImageMapper.propTypes = {\n\tactive: _propTypes2[\"default\"].bool,\n\tfillColor: _propTypes2[\"default\"].string,\n\theight: _propTypes2[\"default\"].number,\n\timgWidth: _propTypes2[\"default\"].number,\n\tlineWidth: _propTypes2[\"default\"].number,\n\tsrc: _propTypes2[\"default\"].string.isRequired,\n\tstrokeColor: _propTypes2[\"default\"].string,\n\twidth: _propTypes2[\"default\"].number,\n\n\tonClick: _propTypes2[\"default\"].func,\n\tonMouseMove: _propTypes2[\"default\"].func,\n\tonImageClick: _propTypes2[\"default\"].func,\n\tonImageMouseMove: _propTypes2[\"default\"].func,\n\tonLoad: _propTypes2[\"default\"].func,\n\tonMouseEnter: _propTypes2[\"default\"].func,\n\tonMouseLeave: _propTypes2[\"default\"].func,\n\n\tmap: _propTypes2[\"default\"].shape({\n\t\tareas: _propTypes2[\"default\"].arrayOf(_propTypes2[\"default\"].shape({\n\t\t\tarea: _propTypes2[\"default\"].shape({\n\t\t\t\tcoords: _propTypes2[\"default\"].arrayOf(_propTypes2[\"default\"].number),\n\t\t\t\thref: _propTypes2[\"default\"].string,\n\t\t\t\tshape: _propTypes2[\"default\"].string,\n\t\t\t\tpreFillColor: _propTypes2[\"default\"].string,\n\t\t\t\tfillColor: _propTypes2[\"default\"].string\n\t\t\t})\n\t\t})),\n\t\tname: _propTypes2[\"default\"].string\n\t})\n};\nmodule.exports = exports[\"default\"];"]},"metadata":{},"sourceType":"script"}